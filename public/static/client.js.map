{
  "version": 3,
  "sources": ["../../src/client/auth.ts", "../../src/client/stripe.ts", "../../src/client/quiz.ts", "../../src/client/video-tracking.ts", "../../src/client/certificate.ts", "../../src/client/index.ts"],
  "sourcesContent": ["export function initLogin(formId: string = 'login-form', messageId: string = 'auth-message') {\n  const form = document.getElementById(formId) as HTMLFormElement;\n  if (!form) return;\n\n  form.addEventListener('submit', async (e) => {\n    e.preventDefault();\n\n    const messageDiv = document.getElementById(messageId);\n    const submitBtn = form.querySelector('button[type=\"submit\"]') as HTMLButtonElement;\n    const originalBtnText = submitBtn.innerHTML;\n\n    submitBtn.disabled = true;\n    submitBtn.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> Iniciando sesi\u00F3n...';\n    if (messageDiv) messageDiv.style.display = 'none';\n\n    const formData = new FormData(form);\n\n    try {\n      const response = await fetch('/api/login', {\n        method: 'POST',\n        body: formData\n      });\n\n      const data = await response.json();\n\n      if (data.success) {\n        if (messageDiv) {\n          messageDiv.className = 'auth-message success';\n          messageDiv.textContent = '\u00A1Bienvenido! Redirigiendo...';\n          messageDiv.style.display = 'block';\n        }\n\n        // Check for redirect param\n        const urlParams = new URLSearchParams(window.location.search);\n        let redirect = urlParams.get('redirect');\n\n        // Validate redirect (only allow relative paths)\n        if (redirect && (!redirect.startsWith('/') || redirect.startsWith('//') || redirect.includes('\\\\') || redirect.includes('://'))) {\n          redirect = null;\n        }\n\n        setTimeout(() => {\n          window.location.href = redirect || '/mi-aprendizaje';\n        }, 1000);\n      } else {\n        throw new Error(data.error || 'Error al iniciar sesi\u00F3n');\n      }\n    } catch (error: any) {\n      if (messageDiv) {\n        messageDiv.className = 'auth-message error';\n        messageDiv.textContent = error.message;\n        messageDiv.style.display = 'block';\n      }\n      submitBtn.disabled = false;\n      submitBtn.innerHTML = originalBtnText;\n    }\n  });\n}\n\nexport function initRegister(formId: string = 'register-form', messageId: string = 'auth-message') {\n  const form = document.getElementById(formId) as HTMLFormElement;\n  if (!form) return;\n\n  form.addEventListener('submit', async (e) => {\n    e.preventDefault();\n\n    const messageDiv = document.getElementById(messageId);\n    const submitBtn = form.querySelector('button[type=\"submit\"]') as HTMLButtonElement;\n    const originalBtnText = submitBtn.innerHTML;\n\n    submitBtn.disabled = true;\n    submitBtn.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> Creando cuenta...';\n    if (messageDiv) messageDiv.style.display = 'none';\n\n    const formData = new FormData(form);\n\n    try {\n      const response = await fetch('/api/register', {\n        method: 'POST',\n        body: formData\n      });\n\n      const data = await response.json();\n\n      if (data.success) {\n        if (messageDiv) {\n          messageDiv.className = 'auth-message success';\n          messageDiv.textContent = '\u00A1Cuenta creada! Redirigiendo...';\n          messageDiv.style.display = 'block';\n        }\n\n        setTimeout(() => {\n          window.location.href = '/mi-aprendizaje';\n        }, 1000);\n      } else {\n        throw new Error(data.error || 'Error al crear cuenta');\n      }\n    } catch (error: any) {\n      if (messageDiv) {\n        messageDiv.className = 'auth-message error';\n        messageDiv.textContent = error.message;\n        messageDiv.style.display = 'block';\n      }\n      submitBtn.disabled = false;\n      submitBtn.innerHTML = originalBtnText;\n    }\n  });\n}\n\nexport async function logout() {\n  if (!confirm('\u00BFEst\u00E1s seguro que deseas cerrar sesi\u00F3n?')) return;\n\n  try {\n    const response = await fetch('/api/logout', { method: 'POST' });\n    if (response.ok) {\n      window.location.href = '/';\n    }\n  } catch (error) {\n    console.error('Error al cerrar sesi\u00F3n:', error);\n    alert('Error al cerrar sesi\u00F3n. Por favor, intenta de nuevo.');\n  }\n}\n\nexport function initLogout() {\n  const btn = document.getElementById('logoutBtn');\n  if (btn) {\n    btn.addEventListener('click', logout);\n  }\n}\n\nexport async function checkAuth() {\n  function remove(id: string) {\n    var el = document.getElementById(id);\n    if (el) el.remove();\n  }\n  function show(id: string, display?: string) {\n    var el = document.getElementById(id);\n    if (el) el.style.display = display || 'inline-flex';\n  }\n\n  try {\n    const response = await fetch('/api/me');\n    const data = await response.json();\n\n    if (data.success && data.user) {\n      remove('login-link');\n      remove('start-link');\n      show('dashboard-link');\n\n      if (data.user.role === 'admin') {\n        var adminLink = document.getElementById('admin-link');\n        if (adminLink) adminLink.style.display = '';\n      } else {\n        remove('admin-link');\n      }\n    } else {\n      remove('dashboard-link');\n      remove('admin-link');\n      show('login-link');\n    }\n  } catch (error) {\n    remove('dashboard-link');\n    remove('admin-link');\n    show('login-link');\n  }\n}\n\nexport function init() {\n  if (document.getElementById('login-form')) {\n    initLogin();\n  }\n  if (document.getElementById('register-form')) {\n    initRegister();\n  }\n}\n", "interface CheckoutOptions {\n  stripeKey: string;\n  paypalClientId: string;\n  courseId: number;\n  currency: string;\n  price: number;\n}\n\nexport function initCheckout(options: CheckoutOptions) {\n  const { stripeKey, paypalClientId, courseId, currency } = options;\n\n  // Initialize Stripe\n  if (typeof (window as any).Stripe === 'undefined') {\n    // Wait for Stripe to load\n    const interval = setInterval(() => {\n        if (typeof (window as any).Stripe !== 'undefined') {\n            clearInterval(interval);\n            setupStripe(options);\n        }\n    }, 100);\n    setTimeout(() => clearInterval(interval), 10000); // 10s timeout\n    return;\n  }\n\n  setupStripe(options);\n}\n\nfunction setupStripe(options: CheckoutOptions) {\n  const { stripeKey, paypalClientId, courseId, currency } = options;\n\n  const stripe = (window as any).Stripe(stripeKey);\n  const elements = stripe.elements();\n  const cardElement = elements.create('card', {\n    style: {\n      base: {\n        fontSize: '16px',\n        color: '#1e293b',\n        '::placeholder': { color: '#94a3b8' }\n      }\n    }\n  });\n\n  const cardElementContainer = document.getElementById('card-element');\n  if (cardElementContainer) {\n    cardElement.mount('#card-element');\n  }\n\n  // Handle card errors\n  cardElement.on('change', (event: any) => {\n    const displayError = document.getElementById('card-errors');\n    if (displayError) {\n      displayError.textContent = event.error ? event.error.message : '';\n    }\n  });\n\n  // Payment Method Selection - Expose to global scope for HTML onclick\n  (window as any).selectPaymentMethod = function(method: 'stripe' | 'paypal') {\n    const stripeBtn = document.getElementById('select-stripe');\n    const paypalBtn = document.getElementById('select-paypal');\n    const stripeDiv = document.getElementById('stripe-payment');\n    const paypalDiv = document.getElementById('paypal-payment');\n\n    if (method === 'stripe') {\n      stripeBtn?.classList.add('active');\n      if (stripeBtn) stripeBtn.style.borderColor = '#8b5cf6';\n\n      paypalBtn?.classList.remove('active');\n      if (paypalBtn) paypalBtn.style.borderColor = '#e2e8f0';\n\n      if (stripeDiv) stripeDiv.style.display = 'block';\n      if (paypalDiv) paypalDiv.style.display = 'none';\n    } else {\n      paypalBtn?.classList.add('active');\n      if (paypalBtn) paypalBtn.style.borderColor = '#8b5cf6';\n\n      stripeBtn?.classList.remove('active');\n      if (stripeBtn) stripeBtn.style.borderColor = '#e2e8f0';\n\n      if (paypalDiv) paypalDiv.style.display = 'block';\n      if (stripeDiv) stripeDiv.style.display = 'none';\n\n      loadPayPalButton(paypalClientId, currency, courseId);\n    }\n  };\n\n  // Also attach event listeners directly if possible (in case inline onclick is removed)\n  const stripeBtn = document.getElementById('select-stripe');\n  if (stripeBtn && !stripeBtn.getAttribute('onclick')) {\n      stripeBtn.addEventListener('click', () => (window as any).selectPaymentMethod('stripe'));\n  }\n  const paypalBtn = document.getElementById('select-paypal');\n  if (paypalBtn && !paypalBtn.getAttribute('onclick')) {\n      paypalBtn.addEventListener('click', () => (window as any).selectPaymentMethod('paypal'));\n  }\n\n  // Handle Stripe Form Submission\n  const form = document.getElementById('payment-form');\n  if (form) {\n    form.addEventListener('submit', async (e) => {\n      e.preventDefault();\n\n      const submitButton = document.getElementById('submit-stripe') as HTMLButtonElement;\n      const messageDiv = document.getElementById('checkout-message');\n      const cardHolderNameInput = document.getElementById('card-holder-name') as HTMLInputElement;\n\n      if (!submitButton || !cardHolderNameInput) {\n        console.error('Missing required elements for payment processing');\n        return;\n      }\n\n      const originalText = submitButton.innerHTML;\n\n      submitButton.disabled = true;\n      submitButton.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> Procesando...';\n      if (messageDiv) messageDiv.style.display = 'none';\n\n      try {\n        // Create Payment Intent\n        const response = await fetch('/api/create-payment-intent', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            courseId: courseId,\n            paymentMethod: 'stripe'\n          })\n        });\n\n        const { clientSecret, error } = await response.json() as any;\n\n        if (error) {\n          throw new Error(error);\n        }\n\n        // Confirm Payment\n        const result = await stripe.confirmCardPayment(clientSecret, {\n          payment_method: {\n            card: cardElement,\n            billing_details: {\n              name: cardHolderNameInput.value\n            }\n          }\n        });\n\n        if (result.error) {\n          throw new Error(result.error.message);\n        }\n\n        // Verify Payment on Server\n        const verifyResponse = await fetch('/api/verify-payment', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            paymentIntentId: result.paymentIntent.id,\n            courseId: courseId\n          })\n        });\n\n        const verifyData = await verifyResponse.json() as any;\n\n        if (verifyData.success) {\n          window.location.href = `/pago-exitoso?courseId=${courseId}`;\n        } else {\n          throw new Error('Error al verificar el pago');\n        }\n\n      } catch (error: any) {\n        if (messageDiv) {\n          messageDiv.className = 'auth-message error';\n          messageDiv.textContent = error.message;\n          messageDiv.style.display = 'block';\n        }\n        submitButton.disabled = false;\n        submitButton.innerHTML = originalText;\n      }\n    });\n  }\n}\n\nfunction loadPayPalButton(clientId: string, currency: string, courseId: number) {\n  if ((window as any).paypalLoaded) return;\n\n  const script = document.createElement('script');\n  script.src = `https://www.paypal.com/sdk/js?client-id=${clientId}&currency=${currency}`;\n  script.onload = () => {\n    (window as any).paypalLoaded = true;\n\n    if (typeof (window as any).paypal === 'undefined') return;\n\n    (window as any).paypal.Buttons({\n      createOrder: async () => {\n        try {\n          const response = await fetch('/api/create-paypal-order', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ courseId: courseId })\n          });\n\n          if (!response.ok) {\n            throw new Error('Network response was not ok');\n          }\n\n          const data = await response.json() as any;\n          if (!data.orderId) {\n             throw new Error('No order ID received');\n          }\n          return data.orderId;\n        } catch (error) {\n          console.error('Error creating PayPal order:', error);\n          throw error;\n        }\n      },\n      onApprove: async (data: any) => {\n        try {\n          const response = await fetch('/api/capture-paypal-order', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n              orderId: data.orderID,\n              courseId: courseId\n            })\n          });\n\n          if (!response.ok) {\n             throw new Error('Network response was not ok');\n          }\n\n          const result = await response.json() as any;\n          if (result.success) {\n            window.location.href = `/pago-exitoso?courseId=${courseId}`;\n          } else {\n             throw new Error(result.error || 'Payment capture failed');\n          }\n        } catch (error: any) {\n          console.error('Error capturing PayPal order:', error);\n          const messageDiv = document.getElementById('checkout-message');\n          if (messageDiv) {\n            messageDiv.className = 'auth-message error';\n            messageDiv.textContent = error.message || 'Error al procesar el pago con PayPal';\n            messageDiv.style.display = 'block';\n          }\n        }\n      },\n      onError: (err: any) => {\n        console.error(err);\n        const messageDiv = document.getElementById('checkout-message');\n        if (messageDiv) {\n          messageDiv.className = 'auth-message error';\n          messageDiv.textContent = 'Error al procesar el pago con PayPal';\n          messageDiv.style.display = 'block';\n        }\n      }\n    }).render('#paypal-button-container');\n  };\n  document.head.appendChild(script);\n}\n\nexport function init() {\n  const config = document.getElementById('checkout-config');\n  if (config) {\n    const options = {\n      stripeKey: config.dataset.stripeKey!,\n      paypalClientId: config.dataset.paypalClientId!,\n      courseId: parseInt(config.dataset.courseId!),\n      currency: config.dataset.currency!,\n      price: parseFloat(config.dataset.price!)\n    };\n    initCheckout(options);\n  }\n}\n", "export function initQuiz(quizId: number, courseId: number, timeLimit: number, slug: string) {\n  let timeRemaining = timeLimit * 60; // seconds\n  let timerInterval: any;\n  const startTime = Date.now();\n  const form = document.getElementById('quizForm') as HTMLFormElement;\n\n  if (!form) return;\n\n  // Tick function\n  const tick = () => {\n    timeRemaining--;\n\n    const minutes = Math.floor(timeRemaining / 60);\n    const seconds = timeRemaining % 60;\n    const display = minutes + ':' + seconds.toString().padStart(2, '0');\n\n    const timerEl = document.getElementById('timerDisplay');\n    if (timerEl) {\n      timerEl.textContent = display;\n\n      // Change colors based on remaining time\n      timerEl.classList.remove('warning', 'danger');\n      if (timeRemaining <= 60) {\n        timerEl.classList.add('danger');\n      } else if (timeRemaining <= 180) {\n        timerEl.classList.add('warning');\n      }\n    }\n\n    // Auto-submit when time runs out\n    if (timeRemaining <= 0) {\n      if (timerInterval) clearInterval(timerInterval);\n      alert('\u00A1Tiempo agotado! La evaluaci\u00F3n se enviar\u00E1 autom\u00E1ticamente.');\n      form.dispatchEvent(new Event('submit'));\n    }\n  };\n\n  // Start timer if time limit exists\n  if (timeLimit > 0) {\n    if (timerInterval) clearInterval(timerInterval);\n    timerInterval = setInterval(tick, 1000);\n  }\n\n  // Handle form submission\n  form.addEventListener('submit', async (e) => {\n    e.preventDefault();\n\n    if (timerInterval) clearInterval(timerInterval);\n\n    // If triggered manually (not by timeout), ask for confirmation\n    if (timeRemaining > 0 && !confirm('\u00BFEst\u00E1s seguro de enviar la evaluaci\u00F3n? No podr\u00E1s cambiar tus respuestas.')) {\n      // Restart timer if cancelled\n      if (timeLimit > 0) {\n        if (timerInterval) clearInterval(timerInterval);\n        timerInterval = setInterval(tick, 1000);\n      }\n      return;\n    }\n\n    const formData = new FormData(form);\n    const answers: Record<string, number[]> = {};\n\n    // Collect answers\n    for (const [key, value] of formData.entries()) {\n      if (key.startsWith('question_')) {\n        const questionId = key.replace('question_', '');\n        if (!answers[questionId]) {\n          answers[questionId] = [];\n        }\n        answers[questionId].push(parseInt(value as string));\n      }\n    }\n\n    const timeTaken = Math.floor((Date.now() - startTime) / 1000);\n\n    const submitBtn = form.querySelector('button[type=\"submit\"]') as HTMLButtonElement;\n    const originalText = submitBtn.innerHTML;\n\n    try {\n      submitBtn.disabled = true;\n      submitBtn.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> Enviando...';\n\n      const response = await fetch('/api/quiz/submit', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          quizId,\n          courseId,\n          answers,\n          timeTaken\n        })\n      });\n\n      const data = await response.json() as any;\n\n      if (data.success) {\n        window.location.href = `/cursos/${slug}/quiz/${quizId}/resultado/${data.attemptId}`;\n      } else {\n        alert('Error: ' + (data.error || 'No se pudo enviar la evaluaci\u00F3n'));\n        submitBtn.disabled = false;\n        submitBtn.innerHTML = originalText;\n      }\n    } catch (error) {\n      console.error('Error:', error);\n      alert('Error al enviar la evaluaci\u00F3n. Por favor, intenta de nuevo.');\n      submitBtn.disabled = false;\n      submitBtn.innerHTML = originalText;\n    }\n  });\n\n  // Prevent accidental exit\n  window.addEventListener('beforeunload', (e) => {\n    // Only warn if quiz is active (not submitted)\n    // We can check if submit button is disabled (submitted)\n    const submitBtn = form.querySelector('button[type=\"submit\"]') as HTMLButtonElement;\n    if (!submitBtn.disabled) {\n        e.preventDefault();\n        e.returnValue = '';\n    }\n  });\n}\n\nexport function init() {\n  const config = document.getElementById('quiz-config');\n  if (config) {\n    const quizId = parseInt(config.dataset.quizId!);\n    const courseId = parseInt(config.dataset.courseId!);\n    const timeLimit = parseInt(config.dataset.timeLimit!);\n    const slug = config.dataset.slug!;\n    initQuiz(quizId, courseId, timeLimit, slug);\n  }\n}\n", "// Video Tracking\nexport function initVideoTracking(lessonId: number, courseId: number, lastPosition: number, videoDuration: number) {\n  let currentVideoTime = 0;\n  let currentVideoDuration = videoDuration || 0;\n  // let videoReady = false; // Removed unused variable\n  let videoProgressInterval: any;\n\n  const saveVideoProgress = async (position: number, duration: number) => {\n    try {\n      await fetch(`/api/lessons/${lessonId}/progress`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          position: Math.round(position),\n          duration: Math.round(duration),\n          courseId\n        })\n      });\n    } catch (error) {\n      console.error('Error saving video progress:', error);\n    }\n  };\n\n  // YouTube\n  function initYouTubeTracking() {\n    const isTrustedYouTubeUrl = (urlString: string): boolean => {\n      try {\n        const parsedUrl = new URL(urlString, window.location.origin);\n        const protocol = parsedUrl.protocol;\n        if (protocol !== 'https:' && protocol !== 'http:') {\n          return false;\n        }\n        const hostname = parsedUrl.hostname.toLowerCase();\n        const allowedHosts = ['youtube.com', 'www.youtube.com', 'm.youtube.com', 'youtu.be'];\n        return allowedHosts.includes(hostname) || hostname.endsWith('.youtube.com');\n      } catch {\n        return false;\n      }\n    };\n\n    const iframe = document.querySelector('iframe');\n    if (!iframe || !isTrustedYouTubeUrl(iframe.src)) return;\n\n    if (!(window as any).YT) {\n      const tag = document.createElement('script');\n      tag.src = 'https://www.youtube.com/iframe_api';\n      const firstScriptTag = document.getElementsByTagName('script')[0];\n      if (firstScriptTag && firstScriptTag.parentNode) {\n        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n      }\n    }\n\n    (window as any).onYouTubeIframeAPIReady = function() {\n      new (window as any).YT.Player(iframe, {\n        events: {\n          'onReady': function(event: any) {\n            // videoReady = true;\n            currentVideoDuration = event.target.getDuration();\n\n            if (lastPosition > 0 && lastPosition < currentVideoDuration - 5) {\n              event.target.seekTo(lastPosition, true);\n              console.log('Restored video position:', lastPosition);\n            }\n\n            videoProgressInterval = setInterval(() => {\n              try {\n                const currentTime = event.target.getCurrentTime();\n                const duration = event.target.getDuration();\n                if (currentTime > 0 && duration > 0) {\n                  currentVideoTime = currentTime;\n                  currentVideoDuration = duration;\n                  saveVideoProgress(currentTime, duration);\n                }\n              } catch (err) {\n                console.error('Error tracking YouTube progress:', err);\n              }\n            }, 10000);\n          },\n          'onStateChange': function(event: any) {\n            if (event.data === (window as any).YT.PlayerState.PAUSED || event.data === (window as any).YT.PlayerState.ENDED) {\n               const currentTime = event.target.getCurrentTime();\n               const duration = event.target.getDuration();\n               saveVideoProgress(currentTime, duration);\n            }\n            if (event.data === (window as any).YT.PlayerState.ENDED) {\n               // Auto-complete logic handled separately or trigger event\n               document.dispatchEvent(new CustomEvent('video-ended'));\n            }\n          }\n        }\n      });\n    };\n\n    if ((window as any).YT && (window as any).YT.Player) {\n      (window as any).onYouTubeIframeAPIReady();\n    }\n  }\n\n  // Vimeo\n  function initVimeoTracking() {\n    const isTrustedVimeoUrl = (urlString: string): boolean => {\n      try {\n        const parsedUrl = new URL(urlString, window.location.origin);\n        const protocol = parsedUrl.protocol;\n        if (protocol !== 'https:' && protocol !== 'http:') {\n          return false;\n        }\n        const hostname = parsedUrl.hostname.toLowerCase();\n        const allowedHosts = ['vimeo.com', 'www.vimeo.com', 'player.vimeo.com'];\n        return allowedHosts.includes(hostname) || hostname.endsWith('.vimeo.com');\n      } catch {\n        return false;\n      }\n    };\n\n    const iframe = document.querySelector('iframe');\n    if (!iframe || !isTrustedVimeoUrl(iframe.src)) return;\n\n    if (!(window as any).Vimeo) {\n      const script = document.createElement('script');\n      script.src = 'https://player.vimeo.com/api/player.js';\n      script.onload = setupVimeoPlayer;\n      document.head.appendChild(script);\n    } else {\n      setupVimeoPlayer();\n    }\n\n    function setupVimeoPlayer() {\n      const player = new (window as any).Vimeo.Player(iframe);\n      player.ready().then(() => {\n        // videoReady = true;\n        player.getDuration().then((duration: number) => {\n          currentVideoDuration = duration;\n          if (lastPosition > 0 && lastPosition < duration - 5) {\n            player.setCurrentTime(lastPosition);\n          }\n        });\n\n        player.on('timeupdate', (data: any) => {\n          currentVideoTime = data.seconds;\n          currentVideoDuration = data.duration;\n        });\n\n        videoProgressInterval = setInterval(() => {\n          if (currentVideoTime > 0 && currentVideoDuration > 0) {\n            saveVideoProgress(currentVideoTime, currentVideoDuration);\n          }\n        }, 10000);\n\n        player.on('ended', () => {\n          saveVideoProgress(currentVideoTime, currentVideoDuration);\n          document.dispatchEvent(new CustomEvent('video-ended'));\n        });\n      });\n    }\n  }\n\n  // HTML5\n  function initHTML5VideoTracking() {\n    const video = document.querySelector('video');\n    if (!video) return;\n\n    video.addEventListener('loadedmetadata', () => {\n      // videoReady = true;\n      currentVideoDuration = video.duration;\n      if (lastPosition > 0 && lastPosition < video.duration - 5) {\n        video.currentTime = lastPosition;\n      }\n    });\n\n    video.addEventListener('timeupdate', () => {\n      currentVideoTime = video.currentTime;\n      currentVideoDuration = video.duration;\n    });\n\n    videoProgressInterval = setInterval(() => {\n      if (video.currentTime > 0 && video.duration > 0) {\n        saveVideoProgress(video.currentTime, video.duration);\n      }\n    }, 10000);\n\n    video.addEventListener('ended', () => {\n      saveVideoProgress(video.currentTime, video.duration);\n      document.dispatchEvent(new CustomEvent('video-ended'));\n    });\n  }\n\n  setTimeout(() => {\n    initYouTubeTracking();\n    initVimeoTracking();\n    initHTML5VideoTracking();\n  }, 1000);\n\n  window.addEventListener('beforeunload', () => {\n    if (currentVideoTime > 0 && currentVideoDuration > 0) {\n      const data = JSON.stringify({\n        position: Math.round(currentVideoTime),\n        duration: Math.round(currentVideoDuration),\n        courseId\n      });\n      const blob = new Blob([data], { type: 'application/json' });\n      navigator.sendBeacon(`/api/lessons/${lessonId}/progress`, blob);\n    }\n  });\n\n  window.addEventListener('unload', () => {\n    if (videoProgressInterval) clearInterval(videoProgressInterval);\n  });\n}\n\n// Completion\nexport function initCompletion(lessonId: number, courseId: number, isCompletedInitial: boolean) {\n  let isCompleted = isCompletedInitial;\n  const btn = document.getElementById('completeBtn');\n  if (!btn) return;\n\n  const toggleComplete = async () => {\n    try {\n      btn.setAttribute('disabled', 'true');\n\n      const response = await fetch(`/api/lessons/${lessonId}/complete`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ completed: !isCompleted, courseId })\n      });\n\n      const data = await response.json() as any;\n\n      if (data.success) {\n        isCompleted = !isCompleted;\n        btn.innerHTML = isCompleted\n          ? '<i class=\"fas fa-check-circle\"></i> Completada'\n          : '<i class=\"far fa-circle\"></i> Marcar Completa';\n        btn.style.background = isCompleted ? '#10b981' : '#64748b';\n\n        if (data.certificateGenerated && data.certificateId) {\n          if (confirm('\u00A1Felicitaciones! Has completado el curso al 100%. Tu certificado ha sido generado. \u00BFDeseas verlo ahora?')) {\n            window.location.href = '/certificado/' + data.certificateId;\n            return;\n          }\n        }\n\n        setTimeout(() => window.location.reload(), 500);\n      } else {\n        alert('Error al actualizar el progreso');\n      }\n    } catch (error) {\n      console.error('Error:', error);\n      alert('Error al actualizar el progreso');\n    } finally {\n      btn.removeAttribute('disabled');\n    }\n  };\n\n  btn.addEventListener('click', toggleComplete);\n\n  // Auto-complete on video ended\n  document.addEventListener('video-ended', () => {\n    if (!isCompleted) {\n      setTimeout(toggleComplete, 1000);\n    }\n  });\n}\n\n// Notes\nexport function initNotes(lessonId: number, courseId: number) {\n  const notesArea = document.getElementById('notesArea') as HTMLTextAreaElement;\n\n  const saveNotes = async () => {\n    if (!notesArea) return;\n    try {\n      const notes = notesArea.value;\n      const saveStatus = document.getElementById('saveStatus');\n\n      const response = await fetch(`/api/lessons/${lessonId}/notes`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ notes, courseId })\n      });\n\n      const data = await response.json() as any;\n\n      if (data.success) {\n        if (saveStatus) {\n          saveStatus.style.display = 'inline';\n          setTimeout(() => saveStatus.style.display = 'none', 3000);\n        }\n      } else {\n        alert('Error al guardar notas');\n      }\n    } catch (error) {\n      console.error('Error:', error);\n      alert('Error al guardar notas');\n    }\n  };\n\n  let notesTimeout: any;\n  if (notesArea) {\n    notesArea.addEventListener('input', () => {\n      clearTimeout(notesTimeout);\n      notesTimeout = setTimeout(saveNotes, 30000);\n    });\n  }\n\n  const btn = document.getElementById('saveNotesBtn');\n  if (btn) {\n    btn.addEventListener('click', saveNotes);\n  }\n}\n\nexport function init() {\n  const config = document.getElementById('video-config');\n  if (config) {\n    const lessonId = parseInt(config.dataset.lessonId!);\n    const courseId = parseInt(config.dataset.courseId!);\n    const lastPosition = parseInt(config.dataset.lastPosition!);\n    const duration = parseInt(config.dataset.duration!);\n    const isCompleted = config.dataset.isCompleted === 'true';\n\n    initVideoTracking(lessonId, courseId, lastPosition, duration);\n    initCompletion(lessonId, courseId, isCompleted);\n    initNotes(lessonId, courseId);\n  }\n}\n", "export function initCertificate() {\n  const downloadBtn = document.getElementById('downloadPdfBtn');\n  if (downloadBtn) {\n    downloadBtn.addEventListener('click', () => {\n       alert('Usa el bot\u00F3n de imprimir y selecciona \"Guardar como PDF\" en tu navegador.');\n       window.print();\n    });\n  }\n}\n", "import * as auth from './auth';\nimport * as stripe from './stripe';\nimport * as quiz from './quiz';\nimport * as video from './video-tracking';\nimport * as certificate from './certificate';\n\ndeclare global {\n  interface Window {\n    ADM: any;\n  }\n}\n\nwindow.ADM = {\n  auth,\n  stripe,\n  quiz,\n  video,\n  certificate\n};\n\n// Check auth status on every page load\ndocument.addEventListener('DOMContentLoaded', () => {\n  auth.checkAuth();\n  auth.initLogout();\n  auth.init();\n  stripe.init();\n  quiz.init();\n  certificate.initCertificate();\n  video.init();\n});\n"],
  "mappings": "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",
  "names": ["auth_exports", "__export", "checkAuth", "init", "initLogin", "initLogout", "initRegister", "logout", "formId", "messageId", "form", "e", "messageDiv", "submitBtn", "originalBtnText", "formData", "data", "redirect", "error", "btn", "remove", "id", "el", "show", "display", "adminLink", "stripe_exports", "__export", "init", "initCheckout", "options", "stripeKey", "paypalClientId", "courseId", "currency", "interval", "setupStripe", "stripe", "cardElement", "event", "displayError", "method", "stripeBtn", "paypalBtn", "stripeDiv", "paypalDiv", "loadPayPalButton", "form", "e", "submitButton", "messageDiv", "cardHolderNameInput", "originalText", "response", "clientSecret", "error", "result", "clientId", "script", "data", "err", "config", "quiz_exports", "__export", "init", "initQuiz", "quizId", "courseId", "timeLimit", "slug", "timeRemaining", "timerInterval", "startTime", "form", "tick", "minutes", "seconds", "display", "timerEl", "e", "formData", "answers", "key", "value", "questionId", "timeTaken", "submitBtn", "originalText", "data", "error", "config", "video_tracking_exports", "__export", "init", "initCompletion", "initNotes", "initVideoTracking", "lessonId", "courseId", "lastPosition", "videoDuration", "currentVideoTime", "currentVideoDuration", "videoProgressInterval", "saveVideoProgress", "position", "duration", "error", "initYouTubeTracking", "isTrustedYouTubeUrl", "urlString", "parsedUrl", "protocol", "hostname", "iframe", "tag", "firstScriptTag", "event", "currentTime", "err", "initVimeoTracking", "isTrustedVimeoUrl", "setupVimeoPlayer", "script", "player", "data", "initHTML5VideoTracking", "video", "blob", "isCompletedInitial", "isCompleted", "btn", "toggleComplete", "notesArea", "saveNotes", "notes", "saveStatus", "notesTimeout", "config", "certificate_exports", "__export", "initCertificate", "downloadBtn", "auth_exports", "stripe_exports", "quiz_exports", "video_tracking_exports", "certificate_exports", "checkAuth", "initLogout", "init", "initCertificate"]
}
